*,
*::before,
*::after {
    box-sizing: border-box; /* CLAVE: Asegura que el padding no cause desbordamiento */
}

body, html {
    margin: 0;
    padding: 0;
   /* height: 100%;*/
    font-family: 'Open Sans', sans-serif;
    display: flex;
    justify-content: center;
    /* align-items: center; */
    background: linear-gradient(to bottom right, #b246f2, #eacdfb); /* Fondo suave */
    /*overflow: auto;*/
    width: 100%;
    overflow-x: hidden;
}

.calendar-container {
    background-color: #ffffff;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    padding: 15px;
    text-align: center;
    /* QUITAMOS el max-width que puede causar problemas de espacio vacío */
    /* max-width: 900px; */ 
    
    /* Aseguramos que ocupe casi el 100% del ancho disponible */
    width: 95%; 
    
    /* Mantenemos el margen vertical */
    margin: 50px auto; 
    
    /* Opcional: Asegurar que el padding interno no se exceda en móviles */
    box-sizing: border-box;
}

h1 {
    font-family: 'Pacifico', cursive;
    color: #c0392b; /* Rojo navideño */
    font-size: 3em;
    margin-bottom: 30px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
}

.advent-calendar {
    display: grid;
    /* Usaremos grid-template-columns para definir columnas de ancho variable */
    /* Puedes ajustar estos valores según cómo quieres que se distribuyan */
    grid-template-columns: repeat(5, 1fr); /* Ejemplo: 6 columnas flexibles */
    /* grid-template-columns: 1.2fr 0.8fr 1fr 1.1fr 0.9fr 1.3fr; /* Otro ejemplo: columnas de ancho más variad */
    /* Puedes jugar con los valores y la cantidad de 'fr' */

    /* Reducimos el espacio entre las cajitas */
    gap: 8px; /* Reducido de 15px a 8px o incluso menos */
    
    padding: 15px; /* Reducir un poco el padding si el gap es pequeño */
    background-image: url('../img/25.jpg'); 
    background-size: cover; 
    background-position: center; 
    background-repeat: no-repeat; 
    background-color: #f7f7f7; 
    border-radius: 15px;
    box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
}

.calendar-day {
    position: relative;
    /* Quitamos el width y height fijos para que Grid y JS los controlen */
    /* width: 100px; */ 
    /* height: 100px; */ 
    
    /* Añadimos un min-width y min-height para que no se hagan demasiado pequeñas */
    min-width: 80px; 
    min-height: 80px; 
    
    background-color: #2ecc71; 
    border-radius: 10px; /* Redondez más uniforme */
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2em;
    font-weight: bold;
    color: #ffffff;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    
    /* Ajustes para el texto dentro de la cajita si es necesario */
    padding: 5px; /* Pequeño padding para que el número no se pegue al borde */
    text-align: center;
    overflow: hidden; /* Asegura que el número no se desborde si la cajita es pequeña */
}

.calendar-day:hover:not(.opened):not(.locked) {
    transform: translateY(-5px) scale(1.05);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
}

.calendar-day.locked {
    background-color: #bdc3c7; /* Gris para días bloqueados */
    cursor: not-allowed;
    box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
    opacity: 0.7;
}

.calendar-day.opened {
    background-color: #ce6fff; /* Rojo para días abiertos */
    opacity: 0.5; /* Opacidad para indicar que ya se abrió */
    cursor: default;
    box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2);
    transform: none; /* Quita la transformación al abrir */
}

.calendar-day.current-day.opened { /* AÑADIMOS .opened a la regla de prioridad */
    /* El día actual ABIERTO debe verse con el color rojo, pero con opacidad 1 */
    background-color: #ce6fff; /* Color del día abierto */
    opacity: 1; /* ¡Sobrescribe la opacidad 0.4 de .opened! */
}

.calendar-day.current-day {
    border: 5px solid #b246f2; /* Color morado brillante para el día actual */
    box-shadow: 0 0 25px rgba(178, 70, 242, 0.8), 0 0 40px rgba(178, 70, 242, 0.5); /* Doble sombra para un efecto de brillo */
    transform: scale(1.05); /* Ligeramente más grande para que destaque */
    animation: pulse-border 1.5s infinite alternate;
    opacity: 1;
}

/* --- NUEVAS CLASES PARA VARIAR TAMAÑO Y POSICIÓN --- */
.calendar-day.size-small {
    /* Dejamos que Grid controle el ancho y alto base */
    min-width: 70px; 
    min-height: 70px; 
    font-size: 1.5em;
}

.calendar-day.size-medium {
    min-width: 90px;
    min-height: 90px;
    font-size: 2em;
}

.calendar-day.size-large {
    min-width: 110px;
    min-height: 110px;
    font-size: 2.5em;
}

/* Clases de expansión (GRID) */
.calendar-day.span-2-col {
    grid-column: span 2; /* Ocupa 2 columnas de ancho */
}
.calendar-day.span-2-row {
    grid-row: span 2;    /* Ocupa 2 filas de alto */
}
.calendar-day.span-3-col {
    grid-column: span 3;
}

.calendar-day.span-2-col,
.calendar-day.span-2-row {
    font-size: 3em; /* Letra más grande para los cuadros grandes */
}

@keyframes pulse-border {
    from {
        box-shadow: 0 0 25px rgba(178, 70, 242, 0.8), 0 0 40px rgba(178, 70, 242, 0.5);
    }
    to {
        box-shadow: 0 0 35px rgba(178, 70, 242, 1), 0 0 55px rgba(178, 70, 242, 0.7);
    }
}

/* Estilos para el overlay del mensaje */
.overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
}

.overlay.active {
    opacity: 1;
    visibility: visible;
}

.message-box {
    background-color: #fff;
    padding: 30px;
    border-radius: 15px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
    text-align: center;
    max-width: 400px;
    width: 90%;
    transform: scale(0.8);
    opacity: 0;
    transition: transform 0.3s ease, opacity 0.3s ease;
}

.overlay.active .message-box {
    transform: scale(1);
    opacity: 1;
}

.message-box h2 {
    font-family: 'Pacifico', cursive;
    color: #c0392b;
    font-size: 2.5em;
    margin-bottom: 20px;
}

.message-box p {
    font-size: 1.2em;
    color: #333;
    line-height: 1.5;
    margin-bottom: 25px;
}

.message-box button {
    background-color: #2ecc71;
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1.1em;
    font-weight: bold;
    transition: background-color 0.2s ease, transform 0.2s ease;
}

.message-box button:hover {
    background-color: #27ae60;
    transform: translateY(-2px);
}

/* Imagen de personas como fondo del mensaje */
.message-box .personal-image {
    max-width: 100%;
    height: auto;
    border-radius: 10px;
    margin-top: 15px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}

/* --- INICIO DE AJUSTES PARA CELULARES (Media Query) --- */
@media (max-width: 500px) {
    
    /* 1. Ajuste del Título */
    .calendar-container h1 {
        font-size: 2em; /* Hace el título más pequeño en el móvil */
        margin-bottom: 20px;
        padding: 20px 10px;
    }
    
    /* 2. Ajuste del Contenedor del Calendario */
    .advent-calendar {
        /* ¡La clave de la adaptación! Reducimos de 5 columnas a 3 */
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 5px; /* Reducimos el espacio entre cajitas para aprovechar el espacio */
        padding: 10px;
    }

    /* 3. Ajuste de las Cajitas que se expanden */
    /* Las cajitas que eran 'span-2-col' (doble ancho) ahora solo ocupan 2/3 del ancho */
    .calendar-day.span-2-col {
        grid-column: span 2; 
    }

    /* Las cajitas grandes (span-2-row) mantendrán su tamaño, pero al cambiar
       el ancho de las columnas, se adaptarán. */

    /* 4. Ajuste de la Fuente en Cajitas Pequeñas */
    .calendar-day.size-small {
        font-size: 1.2em;
    }
    .calendar-day.size-medium {
        font-size: 1.5em;
    }
    .calendar-day.size-large {
        font-size: 2em;
    }
}
/* --- FIN DE AJUSTES PARA CELULARES --- */